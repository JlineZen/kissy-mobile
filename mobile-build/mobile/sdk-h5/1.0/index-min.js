window.S=KISSY;var bachi_debug=function(){var a=(new S.Uri(window.location.href)).getQuery().get("bachi");return S.isUndefined(a)?!1:!0}();KISSY.config({packages:[{name:"mobile",tag:"20130517",path:bachi_debug?"http://a.zoojs.org/jayli/kissy-mobile/mobile":"http://a.tbcdn.cn/s/kissy/mobile",ignorePackageNameInUri:!0,debug:!0,charset:"utf-8"}]});
(function(){this.Host={platform:"h5",client_type:"h5",client_nav:"true",open:function(a,c){var b=(new S.Uri(a)).getHostname();""==b||b==(new S.Uri(window.location.href)).getHostname()?App.forward(a,c):window.location.href=a},back:function(a){App.back(a)},set_browser_title:function(a){try{document.getElementsByTagName("title")[0].innerHTML=a}catch(c){}this.nav_exist()&&App.get("page").one(".J-top-nav").one(".u-title span").html(a)},set_title:function(){this.set_browser_title.apply(this,arguments)},
set_back:function(a){"undefined"==typeof a&&(a=!0);this.nav_exist()&&(a=!1===a?"hidden":"visible",App.get("page").one(".J-top-nav").one(".u-back").css({visibility:a}))},set_icon:function(a,c){"undefined"==typeof c&&(c=new Function);if(this.nav_exist()){var b=S.Node('<a href="javascript:void(0)"></a>');b.css({background:"url("+a+") no-repeat center center"});App.get("page").one(".J-top-nav").one(".J-icon").empty().append(b).css({visibility:"visible"});b.on("click",c)}},nav_exist:function(){return!!App.get("page").one(".J-mok")},
tapDelegate:function(){var a=this;S.Event.delegate(document,"click","a",function(c){var b=S.one(c.currentTarget);!S.isUndefined(b.attr("target"))&&""!==b.attr("target")||/^javascript:/i.test(b.attr("href"))?"top"==b.attr("target")&&(window.location.href=b.attr("href"),c.preventDefault()):(b=b.attr("href"),a.open(a.wrapUrl(b)),c.preventDefault())})},wrapUrl:function(a){var c=S.unparam((new S.Uri(a)).getQuery().toString()),b=(new S.Uri(a)).getQuery().get("client_type"),d=(new S.Uri(a)).getQuery().get("client_nav");
S.mix(c,{client_type:S.isUndefined(b)?this.client_type:b,client_nav:S.isUndefined(d)?this.client_nav:d});return a=(new S.Uri(a)).setQuery(S.param(c)).toString()}};this.App={};KISSY.use("mobile/app/1.2/",function(a,c){App=c({viewpath:"a.php?a="+(new Date).getTime(),forceReload:!0,fullRangeWidth:!1,pageCache:!0,webkitOptimize:!0,positionMemory:!0,animWrapperAutoHeightSetting:!0,containerHeighTimmer:!0,tapTrigger:".not-available"});a.ready(function(){Host.tapDelegate()})})}).call(this);
