KISSY.add("mobile/simple-mask/1.0/index",function(b){function d(a,c){if(this instanceof d)this.con=b.one(a),d.superclass.constructor.call(this,c),this.init();else return new d(a,c)}d.ATTRS={id:{value:"J-Simple-Mask"},className:{value:""},zIndex:{value:999},opacity:{value:0.6},fade:{value:!0},duration:{value:0.3}};b.extend(d,b.Base,{init:function(){this.id=this.get("id");this.zIndex=this.get("zIndex");this.opacity=this.get("opacity");this.fade=this.get("fade");this.duration=this.get("duration")},addMask:function(){var a=
this;if(b.one("#"+a.id))return this;var c=b.Node('<div id="'+a.id+'"></div>');c.css({display:"none","z-index":a.zIndex,"background-color":"black",left:0,position:"fixed",top:0,width:window.innerWidth+"px",opacity:a.fade?0:a.opacity,height:window.innerHeight+"px"});b.one("body").append(c);a.fade?(c.css("display","block"),b.Anim(c,{opacity:a.opacity},a.duration,"none",function(){a.fire("maskReady")}).run()):(c.css("display","block"),a.fire("maskReady"));a._disableTouchMove();return this},removeMask:function(){var a=
this,c=b.one("#"+a.id);if(!c)return!1;a.fade?b.Anim(c,{opacity:0},a.duration,"none",function(){c.remove();a.fire("maskRemoved")}).run():(b.one("#"+a.id).remove(),a.fire("maskRemoved"));a._enableTouchMove();return this},masked:function(){return b.one("#"+this.id)?!0:!1},getMask:function(){return this.masked()?b.one("#"+this.id):null},_disableTouchMove:function(){b.one(document).on("touchmove",this._preventTouchMove)},_enableTouchMove:function(){b.one(document).detach("touchmove",this._preventTouchMove)},
_preventTouchMove:function(a){a.preventDefault()},destory:function(){}});return d},{requires:["base","node"]});
